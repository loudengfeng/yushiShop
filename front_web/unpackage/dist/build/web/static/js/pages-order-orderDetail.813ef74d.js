(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-orderDetail"],{"0a18":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniPopup:a("cb42").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"row"},[i("v-uni-text",{staticClass:"yticon icon-daifukuan"}),i("v-uni-view",{staticClass:"pay"},[i("span",[t._v(t._s(t.statusName))]),1==t.status?i("span",{staticClass:"timer"},[t._v("到"+t._s(t.orderDetail.FinishDate)+"订单自动关闭")]):t._e()])],1),i("v-uni-view",{staticClass:"row-c"},[i("v-uni-text",{staticClass:"yticon icon-shouhuodizhi"}),i("v-uni-view",{staticClass:"localAddress"},[t._v(t._s(t.orderDetail.addrSnapshot.receiver)),i("span",[t._v(t._s(t.orderDetail.addrSnapshot.mobile))]),i("v-uni-view",[t._v(t._s(t.orderDetail.addrSnapshot.province)+t._s(t.orderDetail.addrSnapshot.city)+t._s(t.orderDetail.addrSnapshot.area))])],1)],1),i("v-uni-view",{staticClass:"store"},[i("v-uni-view",[i("v-uni-view",{staticClass:"storeCenter",staticStyle:{"margin-bottom":"40rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jump()}}},[i("v-uni-view",{staticClass:"store-l"},[i("img",{attrs:{src:t.orderDetail.product.mainImage,alt:""}})]),i("v-uni-view",{staticClass:" store-C"},[i("span",{staticClass:"C-top"},[t._v(t._s(t.orderDetail.product.productName))])]),i("v-uni-view",{staticClass:"store-r"},[i("span",[t._v("￥"+t._s(t.orderDetail.product.price))])])],1)],1),i("v-uni-view",{staticClass:"storeFooter",staticStyle:{"padding-bottom":"110rpx"}},[i("ul",[i("li",[t._v("实付款 (含运费)"),i("span",[t._v("￥"+t._s(t.orderDetail.actualPrice))])])]),i("ul",[i("li",{staticClass:"top"},[t._v("订单信息")]),i("li",[t._v("订单编号: "+t._s(t.orderDetail.id)),i("span",{staticClass:"copy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyInfo(t.orderDetail.id,"订单号复制成功")}}},[t._v("复制")])]),i("li",[t._v("所属人: "+t._s(t.orderDetail.product.belongUser.realName))]),i("li",[t._v("联系方式: "+t._s(t.orderDetail.product.belongUser.userMobile))]),i("li",{staticStyle:{"margin-bottom":"30rpx"}},[t._v("下单时间: "+t._s(t.orderDetail.updateTime))])]),i("v-uni-view",{staticClass:"yt-list-cell b-b",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("v-uni-text",{staticClass:"cell-tit clamp"},[t._v("微信收款码")]),i("img",{staticClass:"cell-tip",staticStyle:{width:"50%"},attrs:{src:t.orderDetail.product.belongUser.wechatCode,alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewShopImg(t.orderDetail.product.belongUser.wechatCode)}}})],1),i("v-uni-view",{staticClass:"yt-list-cell b-b",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20rpx"}},[i("v-uni-text",{staticClass:"cell-tit clamp"},[t._v("支付宝收款码")]),i("img",{staticClass:"cell-tip",staticStyle:{width:"50%"},attrs:{src:t.orderDetail.product.belongUser.aliCode,alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewShopImg(t.orderDetail.product.belongUser.aliCode)}}})],1),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"price-content"},[i("v-uni-text",[t._v("实付款")]),i("v-uni-text",{staticClass:"price-tip"},[t._v("￥")]),i("v-uni-text",{staticClass:"price"},[t._v(t._s(t.orderDetail.actualPrice))])],1),100!=t.orderDetail.orderStatus?i("v-uni-text",{staticClass:"submit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交订单")]):t._e()],1)],1),i("uni-popup",{ref:"popups",attrs:{type:"center"}},[i("v-uni-view",[i("v-uni-image",{staticClass:"preview-shopImg",staticStyle:{height:"720rpx"},attrs:{src:t.shopImg}})],1)],1),i("uni-popup",{ref:"popup",attrs:{type:"center"}},[i("v-uni-view",{staticClass:"contact-popup"},[i("v-uni-view",[t._v("上传支付凭证")])],1),i("v-uni-view",{staticClass:"updata",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updata()}}},[t.paypzImg?i("img",{staticClass:"img",attrs:{src:t.paypzImg}}):i("v-uni-view",{staticClass:"updata-box"},[i("v-uni-view",{staticClass:"updata-content"},[i("img",{attrs:{src:a("4a00")}}),i("v-uni-view",[t._v("上传支付凭证")])],1)],1)],1)],1)],1)],1)},o=[]},"0c81":function(t,e,a){"use strict";a.r(e);var i=a("70f1"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"26fc":function(t,e,a){"use strict";var i=a("c1df"),n=a.n(i);n.a},"4a00":function(t,e,a){t.exports=a.p+"static/temp/camera.png"},"70f1":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d4b5");var n=i(a("2634")),o=i(a("2fdc")),s=i(a("cb42")),r={components:{uniPopup:s.default},data:function(){return{paypzImg:"",shopImg:"",orderDetail:"",status:"",orderId:"",ProductId:""}},computed:{statusName:function(){return 0==this.status?"等待买家付款...":"交易完成"}},onLoad:function(t){this.orderId=t.orderId,this.getShopDetail(t.orderId),this.status=t.status},methods:{closePage:function(){this.$refs.popup.close()},updata:function(t){var e=this;uni.chooseImage({count:1,success:function(t){e.copyImg=t.tempFiles[0].path;uni.uploadFile({url:e.$config.domain.api+"tob/image/uploadToOss",filePath:t.tempFiles[0].path,name:"file",header:{Authorization:uni.getStorageSync("token")},formData:{action:"VoucherUpload",dlogo:!0},success:function(t){if("uploadFile:ok"==t.errMsg){var a=JSON.parse(t.data);"000000"==a.code?(e.paypzImg=a.data,e.$api.msg("上传完成",1500,!0,"none"),e.closePage()):e.$api.msg(t.msg)}}})}})},submit:function(){var t=this;return(0,o.default)((0,n.default)().mark((function e(){var a;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.paypzImg){e.next=3;break}return t.$refs.popup.open(),e.abrupt("return");case 3:return e.next=5,t.$api.api.uploadPaymentProof({orderId:t.orderDetail.id,paymentProof:t.paypzImg});case 5:a=e.sent,"000000"==a.code&&(t.$api.msg("购买成功"),setTimeout((function(){uni.switchTab({url:"/pages/user/user"})}),800));case 7:case"end":return e.stop()}}),e)})))()},previewShopImg:function(t){this.shopImg=t,this.$refs.popups.open()},jump:function(t){uni.navigateTo({url:"/pages/product/product?ProductId="+t})},copyInfo:function(t,e){uni.setClipboardData({data:t,success:function(){uni.showToast({title:e})}})},cancelTui:function(t){var e=this;uni.showModal({title:"提示",content:"确定要取消退款/退货？",success:function(a){if(a.confirm){var i={OrderId:t},n=JSON.stringify(i),o={action:"CancelRefund",data:n};e.$api.api.joinShopCart(o).then((function(t){uni.navigateBack({delta:1})}))}else a.cancel}})},getShopDetail:function(t){var e=this;return(0,o.default)((0,n.default)().mark((function a(){var i,o;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={id:t},a.next=3,e.$api.api.orderDetail(i);case 3:o=a.sent,"000000"==o.code?e.orderDetail=o.data:e.$api.msg(o.msg);case 5:case"end":return a.stop()}}),a)})))()},onBridgeReady:function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appid,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:"prepay_id="+t.prepay_id,signType:"MD5",paySign:t.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg&&uni.navigateTo({url:"/pages/money/paySuccess"})}))},confirm:function(t,e){var a=this;if(4==t){var i={orderId:this.orderId,action:"FinishOrder"};uni.showLoading({title:"确认收货中..."}),setTimeout((function(){a.$api.api.FinishOrder(i).then((function(t){1==t.data.success?(uni.hideLoading(),uni.switchTab({url:"/pages/index/index"})):(uni.hideLoading(),a.$api.msg(t.data.msg))}))}),600)}if(3==t){if("5555"==this.ProductId||"5560"==this.ProductId)return this.$api.msg("此订单不支持退款");var n=this;uni.showModal({title:"提示",content:"确定不要货了吗？",success:function(t){t.confirm?setTimeout((function(){n.$store.commit("saveRefund",e),uni.navigateTo({url:"/pages/order/ApplyForRefund"})}),600):t.cancel&&console.log("用户点击取消")}})}if(2==t){uni.showLoading({title:"加载中..."});var o={action:"Pay",VoucherNumber:"",OpenId:uni.getStorageSync("openId")};uni.hideLoading(),this.$api.api.payWay(o).then((function(t){"true"==t.data.status&&a.onBridgeReady(t.data)}))}if(10==t){var s=this;uni.showModal({title:"提示",content:"确定不要货了吗？",success:function(t){t.confirm?(s.$store.commit("saveRefund",e),setTimeout((function(){uni.navigateTo({url:"./returnGoods"})}),600)):t.cancel&&console.log("用户点击取消")}})}if(1==t){var r=this;uni.showModal({title:"提示",content:"确定不要货了吗？",success:function(t){t.confirm?setTimeout((function(){var t={orderId:r.orderId,action:"CancelOrder"};r.$api.api.cancelOrder(t).then((function(t){console.log(t),1==t.data.success?uni.switchTab({url:"/pages/index/index"}):r.$api.msg(t.data.msg)}))}),600):t.cancel&&console.log("用户点击取消")}})}if(6==t){var c={OrderId:this.orderId,action:"Logistic"};this.$api.api.Logistic(c).then((function(t){1==t.data.success&&"Android"==plus.os.name&&plus.runtime.launchApplication({pname:"http://m.kuaidi100.com/index_all.html?postid=773032974383712&amp;type=shentong&amp;callbackurl=http%3A%2F%2Fb2c.nyakarlek.cn%2FVshop%2FMyLogistics.aspx%3FOrderId%3D200329154951705%26ReferralId%3D1104"},(function(t){console.log("Open system default browser failed: "+t.message)}))}))}}}};e.default=r},c1df:function(t,e,a){var i=a("ec47");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("770b1b48",i,!0,{sourceMap:!1,shadowMode:!1})},c1ea:function(t,e,a){"use strict";a.r(e);var i=a("0a18"),n=a("0c81");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("26fc");var s=a("828b"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"4e20837e",null,!1,i["a"],void 0);e["default"]=r.exports},ec47:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.contact-popup[data-v-4e20837e]{padding:%?30?%;background-color:#f5f5f5;border-radius:%?20?%;display:flex;flex-direction:column;align-items:center}.contact-popup > uni-view[data-v-4e20837e]{width:%?420?%;text-align:center;margin:%?10?%;height:%?80?%;line-height:%?80?%;border-radius:%?20?%;background-color:#fff}.updata[data-v-4e20837e]{position:relative;margin:%?20?% auto;background-color:#f5f5f5;width:%?580?%;height:%?580?%;border:%?1?% dashed #6c7aa7}.updata .img[data-v-4e20837e]{width:100%;height:100%}.updata .updata-box[data-v-4e20837e]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.updata .updata-box .updata-content[data-v-4e20837e]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly}.updata .updata-box .updata-content > img[data-v-4e20837e]{margin-bottom:%?20?%;width:%?100?%;height:%?100?%}.footer[data-v-4e20837e]{position:fixed;left:0;bottom:0;z-index:995;display:flex;align-items:center;width:100%;height:%?90?%;justify-content:space-between;font-size:%?30?%;background-color:#fff;z-index:998;color:#606266;box-shadow:0 -1px 5px rgba(0,0,0,.1)}.footer .price-content[data-v-4e20837e]{padding-left:%?30?%}.footer .price-tip[data-v-4e20837e]{color:#fa436a;margin-left:%?8?%}.footer .price[data-v-4e20837e]{font-size:%?36?%;color:#fa436a}.footer .submit[data-v-4e20837e]{display:flex;align-items:center;justify-content:center;width:%?280?%;height:100%;color:#fff;font-size:%?32?%;background-color:#323f6c}uni-page-body[data-v-4e20837e]{background:#f8f8f8;padding-top:%?16?%}body.?%PAGE?%[data-v-4e20837e]{background:#f8f8f8}.content[data-v-4e20837e]{padding:0 %?30?%;background:#fff}.row[data-v-4e20837e]{display:flex;justify-content:space-between;height:%?200?%;line-height:%?200?%}.row-c[data-v-4e20837e]{display:flex;height:%?200?%}.icon-shouhuodizhi[data-v-4e20837e]{margin-right:%?10?%;font-size:%?50?%;line-height:%?80?%}.localAddress > span[data-v-4e20837e]{color:#909399}.icon-daifukuan[data-v-4e20837e]{font-size:%?100?%}.pay[data-v-4e20837e]{display:flex;flex-direction:column}.pay span[data-v-4e20837e]:first-child{margin-top:%?55?%;align-self:flex-end}.timer[data-v-4e20837e]{font-size:12px;color:#909399}.storeCenter[data-v-4e20837e]{display:flex}.storeTop[data-v-4e20837e]{display:flex;margin-bottom:%?20?%}.icon-you[data-v-4e20837e]{margin-left:%?20?%}.store-l[data-v-4e20837e]{flex:2}.store-l img[data-v-4e20837e]{width:%?160?%;height:100%}.store-C[data-v-4e20837e]{display:flex;flex-direction:column;flex:4;margin-left:%?10?%}.clothes[data-v-4e20837e],\n.color[data-v-4e20837e],\n.size[data-v-4e20837e],\n.count[data-v-4e20837e]{color:#909399}.store-r[data-v-4e20837e]{display:flex;flex-direction:column;flex:1}.store-r span[data-v-4e20837e]{align-self:flex-end}ul[data-v-4e20837e]{padding:0;margin-top:%?20?%}li[data-v-4e20837e]{list-style:none;display:flex;justify-content:space-between;font-size:12px}.top[data-v-4e20837e]{font-size:14px;display:flex;justify-content:flex-start;margin-bottom:%?10?%}.top[data-v-4e20837e]:before{content:"";height:%?40?%;border-left:%?6?% solid #fa436a;margin-top:%?6?%;margin-right:%?10?%}.copy[data-v-4e20837e]{color:#fa436a}.add-btnT[data-v-4e20837e]{display:flex;align-items:center;justify-content:center;width:%?300?%;height:%?80?%;margin:%?60?% auto;font-size:%?32?%;color:#fff;background-color:#323f6c;border-radius:%?10?%;box-shadow:1px 2px 5px rgba(50,63,108,.4)}.add-btn[data-v-4e20837e]{display:flex;align-items:center;justify-content:center;width:%?300?%;height:%?80?%;margin:%?60?% %?20?%;font-size:%?32?%;color:#fff;background-color:#323f6c;border-radius:%?10?%;box-shadow:1px 2px 5px rgba(50,63,108,.4);float:left}',""]),t.exports=e}}]);